{"version":3,"names":["LINKING_ERROR","Platform","select","ios","default","SmartechEventEmitter","NativeModules","SmartechRCTEventEmitter","NativeEventEmitter","DeviceEventEmitter","SmartechBaseReactnativeModule","SmartechBaseReactNative","Proxy","get","Error","defaultCallback","method","err","res","console","log","callWithCallback","args","callback","push","apply","eventMap","SmartechReact","SmartechDeeplink","addListener","eventName","handler","eventEmitter","setDeeplinkInit","removeListener","remove","trackAppInstall","trackAppUpdate","trackAppInstallUpdateBySmartech","trackEvent","payload","login","identity","logoutAndClearUserIdentity","isLougoutClearIdentity","setUserIdentity","getUserIdentity","clearUserIdentity","updateUserProfile","profilePayload","optTracking","isTrackingOpted","hasOptedTracking","optInAppMessage","isInappOpted","hasOptedInAppMessage","setUserLocation","latitude","longitude","getAppId","getDeviceGuid","getSDKVersion","module","exports"],"sources":["index.tsx"],"sourcesContent":["import { DeviceEventEmitter, NativeEventEmitter, NativeModules, Platform } from 'react-native';\n\nconst LINKING_ERROR =\n  `The package 'smartech-base-react-native' doesn't seem to be linked. Make sure: \\n\\n` +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\n  const SmartechEventEmitter = NativeModules.SmartechRCTEventEmitter ? new NativeEventEmitter(NativeModules.SmartechRCTEventEmitter) : DeviceEventEmitter;\n  const SmartechBaseReactnativeModule = NativeModules.SmartechBaseReactNative\n  ? NativeModules.SmartechBaseReactNative\n  : new Proxy(\n      {},\n      {\n        get() {\n          throw new Error(LINKING_ERROR);\n        },\n      }\n    );\n\n\nfunction defaultCallback(method: string, err: any, res: any) {\n  if (err) {\n      console.log('Smartech ' + method + ' default callback error', err);\n  }\n  else {\n      console.log('Smartech ' + method + ' default callback result', res);\n  }\n}\n\n// Used to handle callback\nfunction callWithCallback(this: any, method: string, args: any[] | null, callback: ((err: any, res: any) => void) | null) {\n  if (typeof callback === 'undefined' || callback == null || typeof callback !== 'function') {\n      callback = (err, res) => {\n          defaultCallback(method, err, res);\n      };\n  }\n  if (args == null) {\n      args = [];\n  }\n  args.push(callback);\n  SmartechBaseReactnativeModule[method].apply(this, args);\n}\n\ninterface EventMapObject {\n  [key: string]: any;\n}\nconst eventMap : EventMapObject = {};\n\nvar SmartechReact = {\n\n  // All the constants declared in the Smartech React Bridge.\n  SmartechDeeplink: SmartechBaseReactnativeModule.SmartechDeeplink,\n\n  // This method is used to register listener.\n  addListener: function (eventName: string, handler: (data: any) => void) {\n    if (SmartechEventEmitter) {\n      const eventEmitter = SmartechEventEmitter.addListener(eventName, handler);\n      if(eventName == 'SmartechDeeplink'){\n        SmartechBaseReactnativeModule.setDeeplinkInit();\n      }\n      eventMap[eventName] = eventEmitter;\n    }\n  },\n\n  // This method is used to unregister registered listener.\n  removeListener: function (eventName: string) {\n    eventMap[eventName].remove();\n  },\n\n  /**\n   * This method is used to track app update event.\n   * This method should be called by the developer to track the app updates event to Smartech.\n   */\n  trackAppInstall: function () {\n    SmartechBaseReactnativeModule.trackAppInstall();\n  },\n\n  /**\n   * This method is used to track app update event.\n   * This method should be called by the developer to track the app updates event to Smartech.\n   */\n  trackAppUpdate: function () {\n    SmartechBaseReactnativeModule.trackAppUpdate();\n  },\n\n  /**\n   * This method is used to track app install or update event by Smartech SDK itself.\n   * This method should be called by the developer to track the app install or update event by Smartech SDK itself.\n   * If you are calling this method then you should not call trackAppInstall or trackAppUpdate method.\n   */\n  trackAppInstallUpdateBySmartech: function () {\n    SmartechBaseReactnativeModule.trackAppInstallUpdateBySmartech();\n  },\n\n  /**\n   * This method is used to track custom event done by the user.\n   * This method should be called by the developer to track any custom activites\n   * that is performed by the user in the app to Smartech backend.\n   */\n  trackEvent: function (eventName: string, payload: any) {\n    SmartechBaseReactnativeModule.trackEvent(eventName, payload);\n  },\n\n  /**\n   * This method is used to send login event to Smartech backend.\n   * This method should be called only when the app gets the user's identity\n   * or when the user does a login activity in the application.\n   */\n  login: function (identity: string) {\n    SmartechBaseReactnativeModule.login(identity);\n  },\n\n  /**\n   * This method would logout the user and clear identity on Smartech backend.\n   * This method should be called only when the user log out of the application.\n   */\n  logoutAndClearUserIdentity: function (isLougoutClearIdentity: boolean) {\n    SmartechBaseReactnativeModule.logoutAndClearUserIdentity(isLougoutClearIdentity)\n  },\n\n  /**\n   * This method would set the user identity locally and with all subsequent events this identity will be send.\n   * This method should be called only when the user gets the identity.\n   */\n  setUserIdentity: function (identity: string, callback: ((err: any, res: any) => void) | null) {\n      callWithCallback('setUserIdentity', [identity], callback);\n  },\n\n /**\n   * This method would get the user identity that is stored in the SDK.\n   * This method should be called to get the user's identity.\n   */\n  getUserIdentity: function (callback: ((err: any, res: any) => void) | null) {\n    callWithCallback('getUserIdentity', null, callback);\n  },\n\n  /**\n   * This method would clear the identity that is stored in the SDK.\n   * This method will clear the user's identity by removing it from.\n   */\n  clearUserIdentity: function () {\n    SmartechBaseReactnativeModule.clearUserIdentity();\n  },\n\n  /**\n   * This method is used to update the user profile.\n   * This method should be called by the developer to update all the user related attributes to Smartech.\n   */\n  updateUserProfile: function (profilePayload: any) {\n    SmartechBaseReactnativeModule.updateUserProfile(profilePayload);\n  },\n\n  // ----- GDPR Methods -----\n\n  /**\n   * This method is used to opt tracking.\n   * If you call this method then we will opt in or opt out the user of tracking.\n   */\n  optTracking: function (isTrackingOpted: boolean) {\n    SmartechBaseReactnativeModule.optTracking(isTrackingOpted);\n  },\n\n  /**\n   * This method is used to get the current status of opt tracking.\n   * If you call this method you will get the current status of the tracking which can be used to render the UI at app level.\n   */\n  hasOptedTracking: function (callback: ((err: any, res: any) => void) | null) {\n      callWithCallback('hasOptedTracking', null, callback);\n  },\n\n  /**\n   * This method is used to opt in-app messages.\n   * If you call this method then we will opt in or opt out the user of in-app messages.\n   */\n  optInAppMessage: function (isInappOpted: boolean) {\n    SmartechBaseReactnativeModule.optInAppMessage(isInappOpted);\n  },\n\n  /**\n   * This method is used to get the current status of opt in-app messages.\n   * If you call this method you will get the current status of the opt in-app messages which can be used to render the UI at app level.\n   */\n  hasOptedInAppMessage: function (callback: ((err: any, res: any) => void) | null) {\n      callWithCallback('hasOptedInAppMessage', null, callback);\n  },\n\n  // ----- Location Methods -----\n\n    /**\n     * This method is used to set the user's location to the SDK.\n     * You need to call this method to set location which will be passed on the Smartech SDK.\n     */\n     setUserLocation: function (latitude: number, longitude: number) {\n      SmartechBaseReactnativeModule.setUserLocation(latitude, longitude);\n   },\n\n  // ----- Helper Methods -----\n\n  /**\n   * This method is used to get the app id used by the Smartech SDK.\n   * If you call this method you will get the app id used by the Smartech SDK.\n   */\n\n  getAppId: function (callback: ((err: any, res: any) => void) | null) {\n      callWithCallback('getAppId', null, callback);\n  },\n\n  /**\n   * This method is used to get the device unique id used by Smartech SDK.\n   * If you call this method you will get the device unique id which is used to identify a device on Smartech.\n   */\n\n  getDeviceGuid: function (callback: ((err: any, res: any) => void) | null) {\n      callWithCallback('getDeviceGuid', null, callback);\n  },\n\n  /**\n   * This method is used to get the current Smartech SDK version.\n   * If you call this method you will get the current Smartech SDK version used inside the app.\n   */\n  getSDKVersion: function (callback: ((err: any, res: any) => void) | null) {\n      callWithCallback('getSDKVersion', null, callback);\n  },\n\n};\n\nmodule.exports = SmartechReact;\n"],"mappings":"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"}